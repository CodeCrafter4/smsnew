<div class="container py-2">
  <div class="card shadow-lg">
    <div class="card-header bg-primary text-white py-3">
      <h4 class="mb-0 text-center">
        <i class="bi bi-person-plus-fill me-2"></i>Add New Student
      </h4>
    </div>

    <div class="card-body p-4">
      <form action="/add" method="POST" class="needs-validation" novalidate>
        <div class="row g-4">
          <!-- Name Field -->
          <div class="col-md-6">
            <div class="form-floating">
              <input
                type="text"
                class="form-control"
                id="name"
                name="name"
                placeholder="Enter student name"
                required
                pattern="[A-Za-z\s]+"
              />
              <label for="name">Full Name</label>
              <div class="invalid-feedback">
                Please enter a valid name (letters only)
              </div>
            </div>
          </div>

          <!-- Roll Number Field -->
          <div class="col-md-6">
            <div class="form-floating">
              <input
                type="text"
                class="form-control"
                id="roll_number"
                name="roll_number"
                placeholder="Enter roll number"
                required
                readonly
              />
              <label for="roll_number">Roll Number</label>
              <div class="invalid-feedback">
                Please enter a valid roll number
              </div>
            </div>
          </div>

          <!-- Class Field -->
          <div class="col-md-6">
            <div class="form-floating">
              <select class="form-select" id="class" name="class" required>
                <option value="" selected disabled>Select class</option>
                <option value="Grade 1">Grade 1</option>
                <option value="Grade 2">Grade 2</option>
                <option value="Grade 3">Grade 3</option>
                <option value="Grade 4">Grade 4</option>
                <option value="Grade 5">Grade 5</option>
                <option value="Grade 6">Grade 6</option>
                <option value="Grade 7">Grade 7</option>
                <option value="Grade 8">Grade 8</option>
                <option value="Grade 9">Grade 9</option>
                <option value="Grade 10">Grade 10</option>
                <option value="Grade 11">Grade 11</option>
                <option value="Grade 12">Grade 12</option>
              </select>
              <label for="class">Class</label>
              <div class="invalid-feedback">Please select a class</div>
            </div>
          </div>

          <!-- Parent Contact Field -->
          <div class="col-md-6">
            <div class="form-floating">
              <input
                type="tel"
                class="form-control"
                id="parent_contact"
                name="parent_contact"
                placeholder="Enter parent contact"
                required
                maxlength="12"
              />
              <label for="parent_contact">Parent Contact</label>
              <div class="invalid-feedback">
                Please enter a valid 10-digit phone number
              </div>
            </div>
          </div>

          <!-- Fee Amount Field -->
          <div class="col-md-12">
            <div class="form-floating">
              <input
                type="number"
                class="form-control"
                id="fee_amount"
                name="fee_amount"
                placeholder="Enter fee amount"
                required
                min="0"
                step="0.01"
              />
              <label for="fee_amount">Registration Fee(ET)</label>
              <div class="invalid-feedback">
                Please enter a valid fee amount
              </div>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div
          class="d-flex flex-column flex-md-row gap-3 justify-content-center mt-4"
        >
          <a
            href="/"
            class="btn btn-outline-secondary btn-lg order-2 order-md-1"
          >
            <i class="bi bi-arrow-left me-2"></i>Cancel
          </a>
          <button
            type="submit"
            class="btn btn-primary btn-lg order-1 order-md-2"
          >
            <i class="bi bi-save me-2"></i>Add Student
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<style>
  body {
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
    min-height: 100vh;
  }

  .container {
    max-width: 900px;
  }

  .card {
    border: none;
    border-radius: 15px;
    overflow: hidden;
  }

  .card-header {
    background: linear-gradient(to right, #1a237e, #283593);
    border-bottom: none;
  }

  .form-floating {
    position: relative;
  }

  .form-control,
  .form-select {
    height: 58px;
    border-radius: 10px;
    border: 2px solid #e0e0e0;
    transition: all 0.3s ease;
  }

  .form-control:focus,
  .form-select:focus {
    border-color: #1a237e;
    box-shadow: 0 0 0 0.25rem rgba(26, 35, 126, 0.1);
  }

  .form-floating label {
    padding-left: 1rem;
  }

  .btn {
    border-radius: 10px;
    padding: 0.75rem 2rem;
    font-weight: 500;
    transition: all 0.3s ease;
    width: 100%;
  }

  @media (min-width: 768px) {
    .btn {
      width: auto;
      min-width: 200px;
    }
  }

  .btn-primary {
    background: linear-gradient(to right, #1a237e, #283593);
    border: none;
  }

  .btn-primary:hover {
    background: linear-gradient(to right, #283593, #1a237e);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(26, 35, 126, 0.3);
  }

  .btn-outline-secondary {
    border: 2px solid #6c757d;
  }

  .btn-outline-secondary:hover {
    background: #6c757d;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(108, 117, 125, 0.3);
  }

  .invalid-feedback {
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }

  @media (max-width: 576px) {
    .container {
      padding: 10px;
    }

    .card-body {
      padding: 15px;
    }

    .btn {
      padding: 0.6rem 1.5rem;
      margin-bottom: 5px;
    }
  }

  .form-control[readonly] {
    background-color: #f8f9fa;
    cursor: not-allowed;
    opacity: 0.8;
  }
</style>

<script>
  // Function to generate roll number
  function generateRollNumber() {
    const random = Math.floor(Math.random() * 9000) + 1000; // 4-digit number between 1000-9999
    return `R${random}`; // Format: R1234
  }

  // Set roll number when page loads
  document.addEventListener("DOMContentLoaded", function () {
    const rollNumberInput = document.getElementById("roll_number");
    rollNumberInput.value = generateRollNumber();

    // Form validation
    const forms = document.querySelectorAll(".needs-validation");

    Array.from(forms).forEach((form) => {
      form.addEventListener(
        "submit",
        (event) => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add("was-validated");
        },
        false
      );
    });

    // Phone number formatting
    const phoneInput = document.getElementById("parent_contact");
    phoneInput.addEventListener("input", function (e) {
      let x = e.target.value
        .replace(/\D/g, "")
        .match(/(\d{0,3})(\d{0,3})(\d{0,4})/);
      e.target.value = !x[2]
        ? x[1]
        : !x[3]
        ? `${x[1]}-${x[2]}`
        : `${x[1]}-${x[2]}-${x[3]}`;
    });

    // Fee amount formatting
    const feeInput = document.getElementById("fee_amount");
    feeInput.addEventListener("input", function (e) {
      if (e.target.value.length > 10) {
        e.target.value = e.target.value.slice(0, 10);
      }
    });
  });
</script>
